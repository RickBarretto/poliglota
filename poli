#! /usr/bin/env arturo

usage: {:
  COMMANDS:
    new <project>

  FUTURE?
    new <project> --empty
    add <template> <project>
    add <template> <project> --as <new name>
    fill <project>
:}

new: $[name :string][
    copy.directory "templates/" ~"repository/|name|"
]

newEmpty: $[name :string][
    write.directory ~"repository/|name|"
]

parser: $[arg][

    case [arg\0]

    when? [= "new"] [

        ensure -> arg\1
        (arg\1 = "--empty")?
        [ ensure -> arg\2, newEmpty arg\2 ]
        [ new arg\1 ]

    ]


    else -> panic usage

]

try? -> parser arg
else -> panic usage
